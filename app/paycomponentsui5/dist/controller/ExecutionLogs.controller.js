sap.ui.define(["qa/com/qelng/pcui5/paycomponentsui5/controller/BaseController","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/export/library","sap/ui/export/Spreadsheet","sap/m/MessageToast"],function(e,t,o,r,n,i){"use strict";let p=r.EdmType;return e.extend("qa.com.qelng.pcui5.paycomponentsui5.controller.ExecutionLogs",{onInit:function(){},onSearch:function(){let e=this.byId("resultPerEmpTable").getBinding("items"),r=this.byId("searchInput").getValue(),n=new t("userId",o.Contains,r);if(r==""){e.filter([])}else{e.filter(n)}},getText:function(e){return this.getResourceBundle().getText(e)},createColumnConfig:function(){let e=[];e.push({label:this.getText("IDExecution"),property:"executionId",type:p.Integer});e.push({label:this.getText("timeStamp"),property:"timeStamp",type:p.DateTime});e.push({label:this.getText("simulationMode"),property:"simulationMode",type:p.Boolean,trueValue:"X",falseValue:""});e.push({label:this.getText("userID"),property:"userId",type:p.String});e.push({label:this.getText("organizationalUnit"),property:"orgUnit",type:p.String});e.push({label:this.getText("group"),property:"group",type:p.String});e.push({label:this.getText("department"),property:"department",type:p.String});e.push({label:this.getText("job"),property:"job",type:p.String});e.push({label:this.getText("hRPersonnelArea"),property:"hRPersonnelArea",type:p.String});e.push({label:this.getText("employeeGroup"),property:"employeeGroup",type:p.String});e.push({label:this.getText("payComponent"),property:"payComponent",type:p.String});e.push({label:this.getText("eligible"),property:"eligible",type:p.Boolean});e.push({label:this.getText("referenceDate"),property:"referenceDate",type:p.Date});e.push({label:this.getText("amount"),property:"amount",type:p.Decimal});e.push({label:this.getText("toBeUpdated"),property:"updated",type:p.Boolean});e.push({label:this.getText("details"),property:"details",type:p.String});return e},onDownload:function(e){let r,p,a,l,s=true;let u=e.getSource().getBindingContext("ExecutionLogServiceModel").getProperty("executionId");p=this.byId("resultPerEmpTable").getBinding("items").filter(new t("executionId",o.EQ,u));r=this.createColumnConfig();a={workbook:{columns:r},dataSource:p,fileName:this.getText("IDExecution")+" "+u+".xlsx"};p.attachDataReceived(function(){if(s){l=new n(a);l.build().then(function(){s=false;this.onSearch();i.show(this.getText("downloadCompleted"))}.bind(this),function(e){}.bind(this)).finally(function(){l.destroy()}.bind(this))}}.bind(this))},dateFormat:function(e){let t=sap.ui.core.format.DateFormat.getDateInstance({pattern:"dd/MM/yyyy"});return t.format(new Date(e))},dateTimeFormat:function(e){let t=sap.ui.core.format.DateFormat.getDateInstance({pattern:"dd/MM/yyyy hh:mm:ss"});return t.format(new Date(e))}})});
//# sourceMappingURL=ExecutionLogs.controller.js.map